<!--
  ============================================================================
  APPLICATION SHELL TEMPLATE
  ============================================================================
  
  Contains:
  - Navigation header with conditional auth UI
  - Main content area with router outlet
  - Global notification components
  - Footer
-->

<!-- Modern Navigation Header -->
<header class="modern-nav">
  <nav class="nav-container">
    <div class="nav-content">
      <!-- Logo with gradient -->
      <a routerLink="/" class="logo-link">
        <div class="logo-icon">ðŸŽ¯</div>
        <span class="logo-text">JobTracker</span>
      </a>

      <!-- Navigation Links - Only show when authenticated -->
      <div class="nav-links">
        @if (isAuthenticated()) {
          <a
            routerLink="/"
            routerLinkActive="nav-link-active"
            [routerLinkActiveOptions]="{ exact: true }"
            class="nav-link"
          >
            <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"
              />
            </svg>
            <span>Applications</span>
          </a>

          <a routerLink="/companies" routerLinkActive="nav-link-active" class="nav-link">
            <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
              />
            </svg>
            <span>Companies</span>
          </a>

          <a routerLink="/documents" routerLinkActive="nav-link-active" class="nav-link">
            <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
              />
            </svg>
            <span>Documents</span>
          </a>
        }

        <!-- Theme Toggle Component -->
        <app-theme-toggle></app-theme-toggle>

        <!-- User Menu (Authenticated) -->
        @if (isAuthenticated()) {
          <div class="user-menu-container" (clickOutside)="closeUserMenu()">
            <button class="user-menu-trigger" (click)="toggleUserMenu()">
              @if (currentUser()?.profilePictureUrl) {
                <img
                  [src]="currentUser()?.profilePictureUrl"
                  [alt]="userFullName()"
                  class="user-avatar"
                />
              } @else {
                <div class="user-avatar-placeholder">
                  {{ userInitials() }}
                </div>
              }
              <span class="user-name">{{ userFullName() }}</span>
              <svg class="dropdown-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                />
              </svg>
            </button>

            <!-- Dropdown Menu -->
            @if (showUserMenu()) {
              <div class="user-dropdown">
                <div class="dropdown-header">
                  <span class="dropdown-email">{{ currentUser()?.email }}</span>
                </div>
                <div class="dropdown-divider"></div>
                <button class="dropdown-item" (click)="logout()">
                  <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                    />
                  </svg>
                  Sign Out
                </button>
              </div>
            }
          </div>
        } @else {
          <!-- Login Button (Not Authenticated) -->
          <a routerLink="/login" class="login-btn">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"
              />
            </svg>
            Sign In
          </a>
        }
      </div>
    </div>
  </nav>
</header>

<!-- Main Content - Router Outlet -->
<main class="main-content">
  <router-outlet></router-outlet>
</main>

<!-- Toast Notifications - Global component for user feedback -->
<app-toast-notification></app-toast-notification>

<!-- Confirm Dialog - Global confirmation modal -->
<app-confirm-dialog></app-confirm-dialog>

<!-- Footer -->
<footer class="app-footer">
  <div class="footer-content">JobTracker Â© 2026 - Track Your Job Search Journey</div>
</footer>
