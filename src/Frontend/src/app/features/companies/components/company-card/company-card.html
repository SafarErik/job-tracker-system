<section
  hlmCard
  class="group relative flex h-full flex-col cursor-pointer transition-all duration-300 hover:shadow-lg hover:border-indigo-500/50"
  (click)="onViewDossier()"
>
  <!-- Header: Logo (Right) + Industry Badge (Left - Text only) -->
  <div hlmCardHeader class="flex-row items-start justify-between space-y-0 pb-4">
    <!-- Industry Badge (Left) -->
    <div class="space-y-1 flex-1">
      @if (company().industry) {
        <span
          class="inline-flex items-center text-xs font-medium text-muted-foreground uppercase tracking-wider"
        >
          {{ company().industry }}
        </span>
      }
    </div>

    <!-- Logo (Right) -->
    <div
      class="relative h-12 w-12 flex-shrink-0 overflow-hidden rounded-lg border bg-card p-1.5 shadow-sm"
    >
      @if (getLogoUrl() && !logoFailed) {
        <img
          [src]="getLogoUrl()"
          [alt]="company().name + ' logo'"
          class="h-full w-full object-contain"
          (error)="onLogoError()"
        />
      } @else {
        <div class="flex h-full w-full items-center justify-center bg-muted text-xl">üè¢</div>
      }
    </div>
  </div>

  <!-- Middle: Company Name + Tech Stack Pills -->
  <div hlmCardContent class="pt-0 pb-4 flex-1">
    <h3
      hlmCardTitle
      class="text-lg font-bold tracking-tight mb-3 transition-colors group-hover:text-indigo-600"
    >
      {{ company().name }}
    </h3>

    @if (company().address) {
      <p class="flex items-center gap-1.5 text-xs text-muted-foreground mb-3 truncate">
        <svg
          class="h-3.5 w-3.5 flex-shrink-0"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
          />
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
          />
        </svg>
        <span class="truncate">{{ company().address }}</span>
      </p>
    }

    <!-- Tech Stack Pills (limit 3) -->
    <div class="flex flex-wrap gap-1.5">
      @for (tech of getVisibleTechStack(); track $index) {
        <span
          class="inline-flex items-center justify-center rounded-full bg-muted px-2.5 py-1 text-[10px] font-medium uppercase tracking-wide border"
        >
          {{ tech }}
        </span>
      }
      @if (getRemainingTechCount() > 0) {
        <span
          class="inline-flex items-center justify-center rounded-full bg-muted px-2.5 py-1 text-[10px] font-medium text-muted-foreground border"
        >
          +{{ getRemainingTechCount() }}
        </span>
      }
    </div>
  </div>

  <!-- Bottom: Active Apps Indicator + View Dossier Link -->
  <div hlmCardFooter class="flex items-center justify-between border-t pt-4">
    <!-- Active Apps Indicator -->
    @if (hasApplications()) {
      <div class="flex items-center gap-2 text-xs font-semibold text-green-600 dark:text-green-500">
        <span
          class="flex h-2 w-2 rounded-full bg-green-500 shadow-[0_0_6px_rgba(34,197,94,0.6)]"
        ></span>
        {{ company().totalApplications }} Active
      </div>
    } @else {
      <div class="flex items-center gap-2 text-xs font-semibold text-muted-foreground">
        <span class="flex h-2 w-2 rounded-full bg-muted border"></span>
        Target Only
      </div>
    }

    <!-- Ghost Button -->
    <button
      hlmBtn
      variant="ghost"
      (click)="onViewDossier(); $event.stopPropagation()"
      class="group/btn flex items-center gap-1 !px-2 !py-1.5 !h-auto text-xs font-medium hover:text-indigo-600"
    >
      View Dossier
      <svg
        class="h-3.5 w-3.5 transition-transform group-hover/btn:translate-x-0.5"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
      </svg>
    </button>
  </div>
</section>
